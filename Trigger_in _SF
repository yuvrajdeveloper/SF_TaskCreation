//Task creation based on Account lastmodifiedby ID which has a duplicate phone number in Account.


rigger RecentAccountTask on Account (After insert) {
    Account a = new Account();
    List<String> acfone = new List<String>();
    Map<Id,Account> mapfone = new Map<Id,Account>();
    Map<String,String> newacc = new Map<String,String>();
    for(Account ac : Trigger.new){
        acfone.add(ac.Phone);
        mapfone.put(ac.Id, ac);    
        
    }
    List<Account> lsac = [SELECT Id, OwnerId, Phone FROM Account where Phone IN : acfone AND Id NOT IN : mapfone.keySet() ORDER BY LastModifiedDate DESC LIMIT 1];
    if(lsac.size()>0){
        newacc.put(a.Phone, a.OwnerId);
    }    
    List<Account> acown = [SELECT Id,OwnerId FROM Account WHERE Phone in :newacc.keySet()];
    
    for(Account aco : acown){
         Task tas = new Task();
        tas.OwnerId = newacc.get(aco.Phone);
        aco.OwnerId = newacc.get(aco.Phone);
    }
    
}
